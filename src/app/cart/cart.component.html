<div class="cart-container">
  <!-- Products in cart list  -->
  <div *ngIf="!!products.length; else emptyCart">
    <div *ngFor="let product of products" class="cart-item">
      <a routerLink="/products/{{product.id}}">
        <img src="{{ product.url }}" alt="{{ product.name }}" class="product-image">
      </a>

      <div class="cart-item-details">
        <h3 class="product-name">{{ product.name }}</h3>
        <p class="product-price">${{ product.price }}</p>
        <label for="{{product.id}}">
          Amount:
          <input
            type="number"
            name="quantity"
            class="number-input "
            id="{{product.id}}"
            min="0"
            (change)="updateQuantity($event)"
            value="{{ product.quantity }}">
        </label>
        <button (click)="remove(product.id)" class="delete-btn">Delete</button>
      </div>
    </div>
    <p class="price">Total: <span>${{total}}</span></p>
  </div>
  <!-- User form  -->
  <div class="cart-panel">
    <form #form="ngForm" (ngSubmit)="submitForm()">
      <label for="fullName">Full Name</label>
      <br>
      <input
        type="text"
        id="fullName"
        name="fullName"
        placeholder="(minimum 3 characters)"
        minlength="3"
        [(ngModel)]="fullName"
        #userFullName="ngModel"
        required>
      <br>
      <label for="address">Address</label>
      <br>
      <input
        type="text"
        id="address"
        name="address"
        placeholder="(minimum 6 characters)"
        minlength="6"
        [(ngModel)]="address"
        #userAddress="ngModel"
        required>
      <br>
      <label for="cardNumber">Credit Card Number</label>
      <br>
      <input
        type="text"
        id="cardNumber"
        name="cardNumber"
        placeholder="(16-digit number)"
        minlength="16"
        maxlength="16"
        [(ngModel)]="cardNumber"
        #userCardNumber="ngModel"
        required>
      <br>
      <p class="note">We'll never share your payment details with anyone else.</p>
      <!-- Disable submit button if no products in the cart or if any of input field invalid -->
      <button type="submit" [disabled]="form.invalid || !products.length || !getCount()" class="submit-btn">Submit</button>
    </form>
    <!-- Error messages for the user form-->
    <div *ngIf="!products.length || !getCount()"  class="error-msg">
      There is no products in the cart!!!
    </div>
    <div *ngIf="userCardNumber.invalid && userCardNumber.dirty"  class="error-msg">
      <div *ngIf="userCardNumber.errors && userCardNumber.errors['required']">
        Please provide your credit card number.
      </div>
      <div *ngIf="userCardNumber.errors && userCardNumber.errors['minlength']">
        Credit card should contains 16 numbers.
      </div>
    </div>
    <div *ngIf="userAddress.invalid && userAddress.dirty" class="error-msg">
      <div *ngIf="userAddress.errors && userAddress.errors['required']">
        Please provide your address.
      </div>
      <div *ngIf="userAddress.errors && userAddress.errors['minlength']">
        Address should contains at least 6 characters.
      </div>
    </div>
    <div *ngIf="userFullName.invalid && userFullName.dirty" class="error-msg">
      <div *ngIf="userFullName.errors && userFullName.errors['required']">
        Please provide your full name.
      </div>
      <div *ngIf="userFullName.errors && userFullName.errors['minlength']">
        Full name should contains at least 3 characters.
      </div>
    </div>
  </div>
</div>
<!-- Display when no items in the cart -->
<ng-template #emptyCart>
  <div  class="empty-cart-message">
    <p>No products in your cart.<br>It is empty!!!</p>
    <a routerLink="/" class="back-link">Back to products list</a>
  </div>
</ng-template>
